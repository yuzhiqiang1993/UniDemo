{"version":3,"sources":["webpack:///D:/workspace/HbuilderWs/HBuilderProjects/uni_app_demo/pages/API/request-payment/request-payment.vue?8008","webpack:///D:/workspace/HbuilderWs/HBuilderProjects/uni_app_demo/pages/API/request-payment/request-payment.vue?b174","webpack:///D:/workspace/HbuilderWs/HBuilderProjects/uni_app_demo/pages/API/request-payment/request-payment.vue?1026","webpack:///D:/workspace/HbuilderWs/HBuilderProjects/uni_app_demo/pages/API/request-payment/request-payment.vue?e209","webpack:///D:/workspace/HbuilderWs/HBuilderProjects/uni_app_demo/pages/API/request-payment/request-payment.vue","webpack:///D:/workspace/HbuilderWs/HBuilderProjects/uni_app_demo/pages/API/request-payment/request-payment.vue?0c3d","webpack:///D:/workspace/HbuilderWs/HBuilderProjects/uni_app_demo/pages/API/request-payment/request-payment.vue?1f5d"],"names":["data","title","loading","price","providerList","onLoad","methods","weixinPay","console","log","uni","login","success","e","request","url","code","res","statusCode","showModal","content","showCancel","ret","payment","paymentData","requestPayment","timeStamp","nonceStr","package","signType","paySign","showToast","fail","errMsg","complete","desc","index","getOrderInfo","id","orderInfo","provider","appid","Promise","result","priceChange","detail","value"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8F;AAC3B;AACL;AACa;;;AAG3E;AACsI;AACtI,gBAAgB,wIAAU;AAC1B,EAAE,qFAAM;AACR,EAAE,0FAAM;AACR,EAAE,mGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAugB,CAAgB,8fAAG,EAAC,C;;;;;;;;;;;;ACA3hB;AAAA;AAAA;AAAA;AAAmwB,CAAgB,2sBAAG,EAAC,C;;;;;;;;;;;;ACAvxB;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;w/BCAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACXA,MADW,kBACJ;AACH,WAAO;AACHC,WAAK,EAAE,iBADJ;AAEHC,aAAO,EAAE,KAFN;AAGHC,WAAK,EAAE,CAHJ;AAIHC,kBAAY,EAAE,EAJX,EAAP;;AAMH,GARU;AASXC,QAAM,EAAE,kBAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkClB,GA3CU;AA4CXC,SAAO,EAAE;AACLC,aADK,uBACO;AACRC,aAAO,CAACC,GAAR,CAAY,MAAZ;AACA,WAAKP,OAAL,GAAe,IAAf;AACAQ,SAAG,CAACC,KAAJ,CAAU;AACNC,eAAO,EAAE,iBAACC,CAAD,EAAO;AACZL,iBAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BI,CAA7B;AACAH,aAAG,CAACI,OAAJ,CAAY;AACRC,eAAG,6DAAsDF,CAAC,CAACG,IAAxD,qBAAuE,KAAI,CAACb,KAA5E,CADK;AAERS,mBAAO,EAAE,iBAACK,GAAD,EAAS;AACdT,qBAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCQ,GAAnC;AACA,kBAAIA,GAAG,CAACC,UAAJ,KAAmB,GAAvB,EAA4B;AACxBR,mBAAG,CAACS,SAAJ,CAAc;AACVC,yBAAO,EAAE,WADC;AAEVC,4BAAU,EAAE,KAFF,EAAd;;AAIA;AACH;AACD,kBAAIJ,GAAG,CAACjB,IAAJ,CAASsB,GAAT,KAAiB,CAArB,EAAwB;AACpBd,uBAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BQ,GAAG,CAACjB,IAAJ,CAASuB,OAAtC;AACA,oBAAIC,WAAW,GAAGP,GAAG,CAACjB,IAAJ,CAASuB,OAA3B;AACAb,mBAAG,CAACe,cAAJ,CAAmB;AACfC,2BAAS,EAAEF,WAAW,CAACE,SADR;AAEfC,0BAAQ,EAAEH,WAAW,CAACG,QAFP;AAGfC,yBAAO,EAAEJ,WAAW,CAACI,OAHN;AAIfC,0BAAQ,EAAE,KAJK;AAKfC,yBAAO,EAAEN,WAAW,CAACM,OALN;AAMflB,yBAAO,EAAE,iBAACK,GAAD,EAAS;AACdP,uBAAG,CAACqB,SAAJ,CAAc;AACV9B,2BAAK,EAAE,SADG,EAAd;;AAGH,mBAVc;AAWf+B,sBAAI,EAAE,cAACf,GAAD,EAAS;AACXP,uBAAG,CAACS,SAAJ,CAAc;AACVC,6BAAO,EAAE,eAAeH,GAAG;AACtBgB,4BAFK;AAGVZ,gCAAU,EAAE,KAHF,EAAd;;AAKH,mBAjBc;AAkBfa,0BAAQ,EAAE,oBAAM;AACZ,yBAAI,CAAChC,OAAL,GAAe,KAAf;AACH,mBApBc,EAAnB;;AAsBH,eAzBD,MAyBO;AACHQ,mBAAG,CAACS,SAAJ,CAAc;AACVC,yBAAO,EAAEH,GAAG,CAACjB,IAAJ,CAASmC,IADR;AAEVd,4BAAU,EAAE,KAFF,EAAd;;AAIH;AACJ,aA1CO;AA2CRW,gBAAI,EAAE,cAACnB,CAAD,EAAO;AACTL,qBAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBI,CAApB;AACA,mBAAI,CAACX,OAAL,GAAe,KAAf;AACAQ,iBAAG,CAACS,SAAJ,CAAc;AACVC,uBAAO,EAAE,eAAeP,CAAC,CAACoB,MADhB;AAEVZ,0BAAU,EAAE,KAFF,EAAd;;AAIH,aAlDO,EAAZ;;AAoDH,SAvDK;AAwDNW,YAAI,EAAE,cAACnB,CAAD,EAAO;AACTL,iBAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBI,CAApB;AACA,eAAI,CAACX,OAAL,GAAe,KAAf;AACAQ,aAAG,CAACS,SAAJ,CAAc;AACVC,mBAAO,EAAE,eAAeP,CAAC,CAACoB,MADhB;AAEVZ,sBAAU,EAAE,KAFF,EAAd;;AAIH,SA/DK,EAAV;;AAiEH,KArEI;AAsECI,kBAtED,gHAsEgBZ,CAtEhB,EAsEmBuB,KAtEnB;AAuED,qBAAKhC,YAAL,CAAkBgC,KAAlB,EAAyBlC,OAAzB,GAAmC,IAAnC,CAvEC;AAwEqB,uBAAKmC,YAAL,CAAkBxB,CAAC,CAACyB,EAApB,CAxErB,SAwEGC,SAxEH;AAyED/B,uBAAO,CAACC,GAAR,CAAY,QAAZ,EAAsB8B,SAAtB,EAzEC;AA0EGA,yBAAS,CAACrB,UAAV,KAAyB,GA1E5B;AA2EGV,uBAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB8B,SAAxB;AACA7B,mBAAG,CAACS,SAAJ,CAAc;AACVC,yBAAO,EAAE,UADC;AAEVC,4BAAU,EAAE,KAFF,EAAd,EA5EH;;;;AAkFDX,mBAAG,CAACe,cAAJ,CAAmB;AACfe,0BAAQ,EAAE3B,CAAC,CAACyB,EADG;AAEfC,2BAAS,EAAEA,SAAS,CAACvC,IAFN;AAGfY,yBAAO,EAAE,iBAACC,CAAD,EAAO;AACZL,2BAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBI,CAAvB;AACAH,uBAAG,CAACqB,SAAJ,CAAc;AACV9B,2BAAK,EAAE,SADG,EAAd;;AAGH,mBARc;AASf+B,sBAAI,EAAE,cAACnB,CAAD,EAAO;AACTL,2BAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBI,CAApB;AACAH,uBAAG,CAACS,SAAJ,CAAc;AACVC,6BAAO,EAAE,eAAeP,CAAC,CAACoB,MADhB;AAEVZ,gCAAU,EAAE,KAFF,EAAd;;AAIH,mBAfc;AAgBfa,0BAAQ,EAAE,oBAAM;AACZ,0BAAI,CAAC9B,YAAL,CAAkBgC,KAAlB,EAAyBlC,OAAzB,GAAmC,KAAnC;AACH,mBAlBc,EAAnB,EAlFC;;;AAuGLmC,gBAvGK,wBAuGQxB,CAvGR,EAuGW;AACZ,UAAI4B,KAAK,GAAG,EAAZ;;;;AAIA,UAAI1B,GAAG,GAAG,+CAA+CF,CAA/C,GAAmD,SAAnD,GAA+D4B,KAA/D,GAAuE,SAAvE,GAAmF,KAAKtC,KAAlG;AACA,aAAO,IAAIuC,OAAJ,CAAY,UAACzB,GAAD,EAAS;AACxBP,WAAG,CAACI,OAAJ,CAAY;AACRC,aAAG,EAAEA,GADG;AAERH,iBAAO,EAAE,iBAAC+B,MAAD,EAAY;AACjB1B,eAAG,CAAC0B,MAAD,CAAH;AACH,WAJO;AAKRX,cAAI,EAAE,cAACnB,CAAD,EAAO;AACTI,eAAG,CAACJ,CAAD,CAAH;AACH,WAPO,EAAZ;;AASH,OAVM,CAAP;AAWH,KAxHI;AAyHL+B,eAzHK,uBAyHO/B,CAzHP,EAyHU;AACXL,aAAO,CAACC,GAAR,CAAYI,CAAC,CAACgC,MAAF,CAASC,KAArB;AACA,WAAK3C,KAAL,GAAaU,CAAC,CAACgC,MAAF,CAASC,KAAtB;AACH,KA5HI,EA5CE,E;;;;;;;;;;;;AC3Bf,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pages/API/request-payment/request-payment.js","sourcesContent":["import { render, staticRenderFns } from \"./request-payment.vue?vue&type=template&id=2585634c&\"\nimport script from \"./request-payment.vue?vue&type=script&lang=js&\"\nexport * from \"./request-payment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./request-payment.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('2585634c', component.options)\n    } else {\n      api.reload('2585634c', component.options)\n    }\n    module.hot.accept(\"./request-payment.vue?vue&type=template&id=2585634c&\", function () {\n      api.rerender('2585634c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"workspace/HbuilderWs/HBuilderProjects/uni_app_demo/pages/API/request-payment/request-payment.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./request-payment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./request-payment.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./request-payment.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./request-payment.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./request-payment.vue?vue&type=template&id=2585634c&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    data() {\n        return {\n            title: 'request-payment',\n            loading: false,\n            price: 1,\n            providerList: []\n        }\n    },\n    onLoad: function() {\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    },\n    methods: {\n        weixinPay() {\n            console.log(\"发起支付\");\n            this.loading = true;\n            uni.login({\n                success: (e) => {\n                    console.log(\"login success\", e);\n                    uni.request({\n                        url: `https://unidemo.dcloud.net.cn/payment/wx/mp?code=${e.code}&amount=${this.price}`,\n                        success: (res) => {\n                            console.log(\"pay request success\", res);\n                            if (res.statusCode !== 200) {\n                                uni.showModal({\n                                    content: \"支付失败，请重试！\",\n                                    showCancel: false\n                                });\n                                return;\n                            }\n                            if (res.data.ret === 0) {\n                                console.log(\"得到接口prepay_id\", res.data.payment);\n                                let paymentData = res.data.payment;\n                                uni.requestPayment({\n                                    timeStamp: paymentData.timeStamp,\n                                    nonceStr: paymentData.nonceStr,\n                                    package: paymentData.package,\n                                    signType: 'MD5',\n                                    paySign: paymentData.paySign,\n                                    success: (res) => {\n                                        uni.showToast({\n                                            title: \"感谢您的赞助!\"\n                                        })\n                                    },\n                                    fail: (res) => {\n                                        uni.showModal({\n                                            content: \"支付失败,原因为: \" + res\n                                                .errMsg,\n                                            showCancel: false\n                                        })\n                                    },\n                                    complete: () => {\n                                        this.loading = false;\n                                    }\n                                })\n                            } else {\n                                uni.showModal({\n                                    content: res.data.desc,\n                                    showCancel: false\n                                })\n                            }\n                        },\n                        fail: (e) => {\n                            console.log(\"fail\", e);\n                            this.loading = false;\n                            uni.showModal({\n                                content: \"支付失败,原因为: \" + e.errMsg,\n                                showCancel: false\n                            })\n                        }\n                    })\n                },\n                fail: (e) => {\n                    console.log(\"fail\", e);\n                    this.loading = false;\n                    uni.showModal({\n                        content: \"支付失败,原因为: \" + e.errMsg,\n                        showCancel: false\n                    })\n                }\n            })\n        },\n        async requestPayment(e, index) {\n            this.providerList[index].loading = true;\n            let orderInfo = await this.getOrderInfo(e.id);\n            console.log(\"得到订单信息\", orderInfo);\n            if (orderInfo.statusCode !== 200) {\n                console.log(\"获得订单信息失败\", orderInfo);\n                uni.showModal({\n                    content: \"获得订单信息失败\",\n                    showCancel: false\n                })\n                return;\n            }\n            uni.requestPayment({\n                provider: e.id,\n                orderInfo: orderInfo.data,\n                success: (e) => {\n                    console.log(\"success\", e);\n                    uni.showToast({\n                        title: \"感谢您的赞助!\"\n                    })\n                },\n                fail: (e) => {\n                    console.log(\"fail\", e);\n                    uni.showModal({\n                        content: \"支付失败,原因为: \" + e.errMsg,\n                        showCancel: false\n                    })\n                },\n                complete: () => {\n                    this.providerList[index].loading = false;\n                }\n            })\n        },\n        getOrderInfo(e) {\n            let appid = \"\";\n\n\n\n            let url = 'https://demo.dcloud.net.cn/payment/?payid=' + e + '&appid=' + appid + '&total=' + this.price;\n            return new Promise((res) => {\n                uni.request({\n                    url: url,\n                    success: (result) => {\n                        res(result);\n                    },\n                    fail: (e) => {\n                        res(e);\n                    }\n                })\n            })\n        },\n        priceChange(e) {\n            console.log(e.detail.value)\n            this.price = e.detail.value;\n        }\n    }\n}\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}