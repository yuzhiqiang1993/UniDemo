{"version":3,"sources":["webpack:///D:/workspace/esp/WeChatEsp/main.js","webpack:///D:/workspace/esp/WeChatEsp/pages/repairs/repairs.vue?695e","webpack:///D:/workspace/esp/WeChatEsp/pages/repairs/repairs.vue?8c10","webpack:///D:/workspace/esp/WeChatEsp/pages/repairs/repairs.vue?a308","webpack:///D:/workspace/esp/WeChatEsp/pages/repairs/repairs.vue?9b68","webpack:///D:/workspace/esp/WeChatEsp/pages/repairs/repairs.vue","webpack:///D:/workspace/esp/WeChatEsp/pages/repairs/repairs.vue?d96c","webpack:///D:/workspace/esp/WeChatEsp/pages/repairs/repairs.vue?5d36"],"names":["createPage","Page","onLoad","data","instruments","JSON","parse","facilityName","console","log","methods","submit","userName","userPhone","uni","showModal","title","content","showCancel","damageInstruments","length","instrument","InstrumentCode","DamageInformation","showToast","icon","DamageInfosImg","stringify","showLoading","$api","submitFacilityRepairs","then","res","hideLoading","success","navigateBack","catch","err","Message","mask","add","push","ID","InstrumentName","FacilitiesName","selectInstrument","e","index","instrumentIndex","target","value","selectedInstrument","alreadExist","forEach","item","$set","changeDamage","detail","takePhoto","chooseImage","count","sizeType","sourceType","chooseImageRes","tempFilePaths","uploadImgFile","imgPath","uploadFile","url","filePath","name","formData","result","fig","Path","complete"],"mappings":"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","file":"pages/repairs/repairs.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/repairs/repairs.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./repairs.vue?vue&type=template&id=485e6a7a&\"\nimport script from \"./repairs.vue?vue&type=script&lang=js&\"\nexport * from \"./repairs.vue?vue&type=script&lang=js&\"\nimport style0 from \"./repairs.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('485e6a7a', component.options)\n    } else {\n      api.reload('485e6a7a', component.options)\n    }\n    module.hot.accept(\"./repairs.vue?vue&type=template&id=485e6a7a&\", function () {\n      api.rerender('485e6a7a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"workspace/esp/WeChatEsp/pages/repairs/repairs.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./repairs.vue?vue&type=template&id=485e6a7a&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./repairs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./repairs.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\n\tonLoad(data) {\n\t\tthis.instruments = JSON.parse(data.instruments)\n\t\tthis.facilityName = data.facilityName;\n\t\tconsole.log(this.instruments)\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\t\"facilityName\": \"\",\n\t\t\t\"instruments\": [],\n\t\t\t\"damageInstruments\": [],\n\t\t\t\"userName\": \"\",\n\t\t\t\"userPhone\": \"\",\n\t\t\t\"instrumentIndex\": 0,\n\t\t}\n\t},\n\tmethods: {\n\t\t/* 提交 */\n\t\tsubmit: function() {\n\n\t\t\tif (this.userName === \"\" || this.userPhone == \"\") {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: \"提示\",\n\t\t\t\t\tcontent: \"请输入您的姓名和联系电话\",\n\t\t\t\t\tshowCancel: false\n\t\t\t\t})\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (this.damageInstruments.length == 0) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: \"提示\",\n\t\t\t\t\tcontent: \"您还没有填写器材信息，请检查\",\n\t\t\t\t\tshowCancel: false\n\t\t\t\t})\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tvar instrument = this.damageInstruments[this.damageInstruments.length - 1]\n\n\t\t\tif (!instrument.InstrumentCode || !instrument.DamageInformation) {\n\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"器材信息不完整，请检查\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\n\t\t\tif (instrument.DamageInfosImg == \"../../static/img/ic_camera_with_bg.png\") {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"器材图片未拍摄，请检查\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t})\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tvar data = {\n\t\t\t\t\"Applicant\": this.userName,\n\t\t\t\t\"ApplicantPhone\": this.userPhone,\n\t\t\t\t\"EquipmentInformation\": JSON.stringify(this.damageInstruments)\n\t\t\t}\n\n\n\t\t\tconsole.log(\"要提交的数据\" + JSON.stringify(data))\n\n\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: \"正在提交数据\"\n\t\t\t})\n\t\t\tthis.$api.submitFacilityRepairs(data).then((res) => {\n\t\t\t\tconsole.log(res)\n\t\t\t\tuni.hideLoading()\n\n\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: \"提示\",\n\t\t\t\t\tcontent: \"提交成功\",\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tuni.navigateBack({\n\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t}).catch((err) => {\n\t\t\t\tuni.hideLoading()\n\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: err.Message,\n\t\t\t\t\ticon: \"none\",\n\t\t\t\t\tmask: true\n\t\t\t\t})\n\n\t\t\t\tconsole.log('request faile', err);\n\t\t\t})\n\n\t\t},\n\n\t\tadd: function() {\n\n\t\t\t/* 先判断列表中数据是否完整 */\n\t\t\tif (this.damageInstruments.length != 0) {\n\t\t\t\tconst instrument = this.damageInstruments[this.damageInstruments.length - 1]\n\t\t\t\tconsole.log(instrument)\n\n\t\t\t\tif (!instrument.InstrumentCode || !instrument.DamageInformation) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: \"上个器材信息不完整，请检查\",\n\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\n\t\t\t\tif (instrument.DamageInfosImg == \"../../static/img/ic_camera_with_bg.png\") {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: \"上个器材图片未拍摄，请检查\",\n\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t})\n\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* 新增器材 */\n\t\t\tthis.damageInstruments.push({\n\t\t\t\tID: 0,\n\t\t\t\tInstrumentCode: \"\",\n\t\t\t\tInstrumentName: \"\",\n\t\t\t\tFacilitiesName: \"\",\n\t\t\t\tDamageInformation: \"\",\n\t\t\t\tDamageInfosImg: \"../../static/img/ic_camera_with_bg.png\"\n\t\t\t})\n\n\t\t},\n\n\t\t/* 选择器材 */\n\t\tselectInstrument: function(e, index) {\n\n\t\t\tthis.instrumentIndex = e.target.value\n\t\t\tconst selectedInstrument = this.instruments[this.instrumentIndex];\n\n\n\t\t\t/* 先判断损坏列表中是否已存在选择的器材 */\n\n\t\t\tvar alreadExist = false\n\t\t\tthis.damageInstruments.forEach(item => {\n\t\t\t\tif (item.ID == selectedInstrument.ID) {\n\t\t\t\t\talreadExist = true\n\t\t\t\t}\n\n\t\t\t})\n\n\t\t\tif (alreadExist) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: \"提示\",\n\t\t\t\t\tcontent: selectedInstrument.InstrumentName + \" 已在报修列表中,无法重复报修\",\n\n\t\t\t\t})\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.$set(this.damageInstruments, index, {\n\t\t\t\tID: selectedInstrument.ID,\n\t\t\t\tInstrumentCode: selectedInstrument.InstrumentCode,\n\t\t\t\tInstrumentName: selectedInstrument.InstrumentName,\n\t\t\t\tFacilitiesName: this.facilityName,\n\t\t\t\tDamageInformation: \"\",\n\t\t\t\tDamageInfosImg: \"../../static/img/ic_camera_with_bg.png\"\n\t\t\t})\n\n\t\t\tconsole.log(this.damageInstruments[index])\n\n\t\t},\n\t\t/* 器材损坏文字 */\n\t\tchangeDamage: function(e, index) {\n\t\t\tthis.$set(this.damageInstruments[index], \"DamageInformation\", e.detail.value)\n\t\t},\n\t\t/* 器材拍照 */\n\t\ttakePhoto: function(e, index) {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1,\n\t\t\t\tsizeType: [\"compressed\"],\n\t\t\t\tsourceType: [\"camera \"],\n\t\t\t\tsuccess: (chooseImageRes) => {\n\t\t\t\t\tconst tempFilePaths = chooseImageRes.tempFilePaths;\n\t\t\t\t\tthis.uploadImgFile(tempFilePaths, index)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tuploadImgFile: function(imgPath, index) {\n\n\t\t\t//console.log(\"要上传的图片：\" + imgPath + \"index:\" + index)\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: \"正在上传图片...\"\n\t\t\t})\n\n\t\t\tuni.uploadFile({\n\t\t\t\turl: \"https://repair.esplohas.com/api/FileUpload/ImgUpload\",\n\t\t\t\tfilePath: imgPath[0],\n\t\t\t\tname: \"file\",\n\t\t\t\tformData: {\n\t\t\t\t\t'oldImgPath': this.damageInstruments[index].imgPath\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\n\t\t\t\t\tconst result = JSON.parse(res.data)\n\n\n\t\t\t\t\tconsole.log(result.fig);\n\t\t\t\t\tif (result.fig === 1) {\n\t\t\t\t\t\t/* 上传成功 */\n\t\t\t\t\t\tconsole.log(\"上传成功：\" + result.Path)\n\t\t\t\t\t\tthis.$set(this.damageInstruments[index], \"DamageInfosImg\", result.Path)\n\t\t\t\t\t\tconsole.log(this.damageInstruments[index])\n\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t/* 上传失败 */\n\t\t\t\t\t\tconsole.log(\"上传失败\")\n\n\t\t\t\t\t}\n\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t}\n}\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./repairs.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./repairs.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}